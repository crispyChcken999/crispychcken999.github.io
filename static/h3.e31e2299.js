class t extends Error{constructor(){super(...arguments),this.statusCode=500,this.fatal=!1,this.unhandled=!1,this.statusMessage=void 0}toJSON(){const t={message:this.message,statusCode:u(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=a(this.statusMessage)),void 0!==this.data&&(t.data=this.data),t}}function s(s){if("string"==typeof s)return new t(s);if(function(t){var s;return!0===(null==(s=null==t?void 0:t.constructor)?void 0:s.__h3_error__)}(s))return s;const e=new t(s.message??s.statusMessage,s.cause?{cause:s.cause}:void 0);if("stack"in s)try{Object.defineProperty(e,"stack",{get:()=>s.stack})}catch{try{e.stack=s.stack}catch{}}if(s.data&&(e.data=s.data),s.statusCode?e.statusCode=u(s.statusCode,e.statusCode):s.status&&(e.statusCode=u(s.status,e.statusCode)),s.statusMessage?e.statusMessage=s.statusMessage:s.statusText&&(e.statusMessage=s.statusText),e.statusMessage){e.statusMessage,a(e.statusMessage)}return void 0!==s.fatal&&(e.fatal=s.fatal),void 0!==s.unhandled&&(e.unhandled=s.unhandled),e}t.__h3_error__=!0;const e=/[^\u0009\u0020-\u007E]/g;function a(t=""){return t.replace(e,"")}function u(t,s=200){return t?("string"==typeof t&&(t=Number.parseInt(t,10)),t<100||t>999?s:t):s}"undefined"!=typeof setImmediate&&setImmediate;export{s as c};
